import rsa
import hashlib


#####
# Create message
#####
JSONmessage = "Sracka JSON JSON"

#####
# Generate hash from JSON 
#####
m = hashlib.sha256()
m.update(JSONmessage)
hashMessage = m.digest()

#####
# Encrypt message using AES, Encrypt signedHashMessage using AES
#####

#Sign message
signedHashMessage = rsa.encryption(privateKey, hashMessage)

#####
# Send Message with digest
#####




#####
# Chech if received hash is same as hash generated by received message
#####
m = hashlib.sha256()
m.update(message.json['message'])

hashMessage = m.digest()
hashReceived = rsa.decryption(privateKey, message.json['hash'])


if(hashMessage == hashReceived){
  #####
  # Accept incomming message
  #####
}
